---
layout: post
title: C++
date: 2023-7-12 
tags: C++
---

*[翁凯C++课程笔记](https://www.bilibili.com/video/BV1dE41167hJ/)*

# 1 The First C++ Program

```
#include <iostream> //文件名不是一定要有后缀的
using namespace std; // Keyword + name

int main(){
    cout << "Hello World! I am" << "18" << "today!" << endl;

    return 0;
}
```

输入：**cin >>**

```
#include <iostream> 
using namespace std; 

int main(){

    int age;
    cin >> age;
    cout << "You are " << age << ".";

    return 0;
}
```

擅用refactor: 重构

# 2 面向对象（Object-oriented）

## 2.1 什么是面向对象

&emsp;&emsp;Object = Entity

&emsp;&emsp;Object may be visible or invisible

&emsp;&emsp;在程序设计中，对象就是变量。如：int i; i 就是一个对象
（Object is variable in programming languages.）

&emsp;&emsp;C++中，所有的对象都会以变量的形式出现

&emsp;&emsp;对象(Objects)= 属性(Attributes) + 服务(Services)

<figure>
    <img src="https://effun.xyz/images/C-plus-plus/object.png" width=200px>
    <center>
    <figcaption>对象</figcaption>
    </center>
</figure>

&emsp;&emsp;数据Data：属性或状态（the properties or status）

&emsp;&emsp;操作Operations：对外提供的服务（the functions）

&emsp;&emsp;对象对外有一个接口

&emsp;&emsp;Mapping(映射)：From the problem space to the solution one.

&emsp;&emsp;举例子：上课，定义一个教室，教室里有学生、老师、投影仪、电脑等，它们之间互相有一定的关系，将这个关系描述出来就是面向对象，从存在什么样的东西来分析事情，而不是从发生流程来描述一个事情。

&emsp;&emsp;从某种程度上说，C++中的class就是C中的struct

### 同一段程序C和C++对比

**C Version**
```
typedef struct point3d{
    float x;
    float y;
    float z;
}Point3d;

void Point3d_print(const Point3d* pd);
Point3d a;
a.x=1; a.y=2; a.z=3;
Point3d_print(&a);
```

**C++ Version**
```
class Point3d{
public:
    Point3d(float x, float y, float z);
    print();
private:
    float x;
    float y;
    float z;
};

Point3d a(1, 2, 3); //a是一个对象
a.print(); //operation
```

&emsp;&emsp;二者不同在于：C++操作在内部，class中有数据有操作。C的操作在外面，struct中只有操作。

&emsp;&emsp;A way to organize: Designs and Implementations.

&emsp;&emsp;对象才是Design和implementation首要关注的东西，而不是控制或数据流。

**&emsp;&emsp;To focus on things, not operations!**

## 2.2 面向对象基本概念

&emsp;&emsp;对象是互相之间在发送和接收消息。Objects send messages

### Objects send messages!

&emsp;&emsp;Messages are:

* composed by the sender
* interpreted by the receiver
* implemented by methods
  
&emsp;&emsp;Messages:

* May cause receiver to change state
* May return results

也就是说，不是在直接操作data，而是在改变operations！

### Object VS. Class

&emsp;&emsp;对象（实体）是东西，类（概念）是东西的种类。

&emsp;&emsp;杯子是一个类，我手里的杯子是一个对象。

&emsp;&emsp;**OOP Characteristics：**

* a. Everything is an object.
* b. A program is a bunch of objects telling each other what to do by sending messages.
* c. Each object has its own memory made up of other objects.
* d. Every object has a type.
* e. All objects of a particular type can receive the same messages

&emsp;&emsp;每一个对象有其自己的内存和类型。

&emsp;&emsp;一个特定类型的所有对象可接受相同的消息。所有可以接受相同消息的对象可以被认为是相同的类型。

&emsp;&emsp;**对象都具有接口**，对象用接口接收消息，接口的功能有Communication和Protection（保护内部的东西）。

&emsp;&emsp;**OOP三大特性：封装，继承，多态**

### 封装（Encapsulation）

&emsp;&emsp;把数据和对数据所有的操作放在一起，操作在外，数据在内。

&emsp;&emsp;隐藏数据和操作的细节。

&emsp;&emsp;外界只能访问公开的部分

## 2.3 以售货机为例实现一个类

&emsp;&emsp;每一个类都应该包含一个.h文件和一个.cpp文件。命名通常每个单词首字母大写。

TicketMachine.h ：
```

```